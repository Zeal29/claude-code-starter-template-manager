---
id: handoff-20260117-120000
created: 2026-01-17 12:00:00
status: open
work_item: E001-T002
context_at_creation: 17%
steps_total: 3
steps_completed: 0
modified_via_draft: []
---

# Handoff: Check Context Command

## WHAT (Objective)
**What are we trying to accomplish?**
Create the `/work:check-context` command that checks context usage and auto-generates next 5 steps at 70%+ threshold.

## WHY (Rationale)
**Why is this important? What problem does it solve?**
Prevents context overflow by prompting users to checkpoint their work before running out of context window. Ensures session continuity through structured handoff files with clear next steps.

## HOW (Approach)
**How are we going to do it? What's the strategy?**
1. Adapt R&D check-context.md for template
2. Replace task.md logic with `docs/_index.md` lookup
3. Locate context file based on ID type (E###/T###/E###-T###)
4. Update context file's Progress Log with `[CHECKPOINT]` marker
5. Create handoff in same folder as context file
6. Use `/git:commit` format for commit message

## CONTEXT (Background)

### Work Completed This Session
- Resumed E001-T002 from previous session (79% complete)
- Ran check-context below threshold test (passed - Test 4)
- Tested generate-handoff command flow (Tests 6, 9-13)
- Verified dynamic step count calculation (3 remaining → 3 steps)
- Tested approval flow with "approve" option (Test 14)

### Current State
- **Status**: Testing phase - approval flow verified
- **Files Modified**: T002-context.md, Handoff/handoff.md (this file)
- **Tests Status**: 10/15 scenarios passed
- **Known Working**: Below threshold detection, work item location, step generation

### Key Decisions Made
- Commands use WHAT/WHY/HOW template for knowledge preservation
- Dynamic step count (2-10) based on Requirements checklist
- No auto-commits (user has full git control)
- State machine: open → in-progress → completed → archived

### Learnings & Insights
- Claude Code slash commands are instruction files, not executable code
- Testing = following instructions manually and verifying output
- The `/context` command output format varies - fallback to manual input needed

## STEPS (Actions)
**Generated steps in priority order:**

- [ ] **Step 1**: Complete approval flow testing with all 3 options
  - _Why_: Verify approve/edit/reject paths work correctly before marking tests complete
  - _Files_: T002-context.md (Progress Log), Handoff/handoff.md

- [ ] **Step 2**: Test --auto-approve flag skips approval prompt
  - _Why_: Validate the flag passthrough from check-context to generate-handoff
  - _Files_: check-context.md, generate-handoff.md

- [ ] **Step 3**: Run end-to-end integration test at 70%+ context
  - _Why_: Verify full workflow from threshold detection to handoff creation
  - _Files_: check-context.md → generates Handoff/handoff.md, updates T002-context.md

## BLOCKERS & DEPENDENCIES
**What's blocking progress or needs attention?**
- _None_

## REFERENCES
**Links to relevant resources:**
- Requirements: [T002-context.md](../T002-context.md#requirements)
- Research: [workAt70Percent/](../../Research/workAt70Percent/)
- Command Files:
  - [check-context.md](../../../../../claude-code-starter/.claude/commands/work/check-context.md)
  - [generate-handoff.md](../../../../../claude-code-starter/.claude/commands/work/generate-handoff.md)

## NOTES
**Additional context for next session:**
- 5 remaining tests: edit flow, reject flow, auto-approve flag, end-to-end integration, real verification
- Subtasks table in T002-context.md still shows "pending" - update after all tests pass
- Consider adding test for E001 (epic) and T### (standalone task) ID patterns

## HOW TO RESUME
1. Read this handoff completely
2. Read T002-context.md for full context
3. Start with Step 1 above
4. Check off steps as you complete them
5. Run `/work:complete-handoff` when all steps done

---
**Generated by**: `/work:generate-handoff` at 17%
